<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cello Chord Player ðŸŽ»</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #2d1810 0%, #4a2c1a 50%, #1a0f0a 100%);
      font-family: 'Comic Sans MS', 'Chalkboard', cursive;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    h1 {
      color: #d4a574;
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 0 20px #8b5a2b;
    }

    .subtitle {
      color: #a67c52;
      margin-bottom: 30px;
      font-size: 1.2rem;
    }

    .controls {
      background: rgba(139, 90, 43, 0.3);
      padding: 20px 40px;
      border-radius: 20px;
      margin-bottom: 30px;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .chord-select {
      padding: 15px 25px;
      font-size: 1.2rem;
      border: none;
      border-radius: 10px;
      background: #8b5a2b;
      color: #fff;
      cursor: pointer;
      font-family: inherit;
    }

    .chord-select:hover {
      background: #a67c52;
    }

    .info {
      color: #d4a574;
      font-size: 1.1rem;
      text-align: center;
      margin-bottom: 20px;
    }

    .cello-body {
      background: linear-gradient(180deg, #5c3d2e 0%, #8b5a2b 30%, #5c3d2e 60%, #3d2817 100%);
      width: 280px;
      height: 400px;
      border-radius: 40% 40% 45% 45%;
      position: relative;
      box-shadow: 
        0 20px 60px rgba(0,0,0,0.6),
        inset 0 -20px 40px rgba(0,0,0,0.4),
        inset 0 10px 20px rgba(255,255,255,0.1);
    }

    .cello-body::before {
      content: '';
      position: absolute;
      top: 5%;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 80px;
      background: linear-gradient(180deg, #2d1810 0%, #4a2c1a 100%);
      border-radius: 3px;
    }

    .f-holes {
      position: absolute;
      top: 35%;
      width: 100%;
      display: flex;
      justify-content: space-around;
      padding: 0 30px;
    }

    .f-hole {
      width: 12px;
      height: 60px;
      border: 3px solid #2d1810;
      border-radius: 50%;
      transform: rotate(15deg);
    }

    .bridge {
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 15px;
      background: #d4a574;
      border-radius: 3px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .strings {
      position: absolute;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 12px;
      height: 320px;
    }

    .string {
      width: 3px;
      height: 100%;
      background: linear-gradient(180deg, #c9a86c 0%, #8b7355 50%, #c9a86c 100%);
      border-radius: 2px;
      cursor: pointer;
      transition: all 0.1s;
      position: relative;
    }

    .string:hover {
      background: linear-gradient(180deg, #e0c88a 0%, #a68b6a 50%, #e0c88a 100%);
      box-shadow: 0 0 15px #c9a86c;
    }

    .string:active, .string.playing {
      background: #ffcc66;
      box-shadow: 0 0 25px #ffcc66;
    }

    .string::after {
      content: attr(data-note);
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      color: #d4a574;
      font-weight: bold;
      font-size: 1rem;
    }

    .string-label {
      position: absolute;
      bottom: -30px;
      left: 50%;
      transform: translateX(-50%);
      color: #a67c52;
      font-size: 0.9rem;
    }

    .fingerboard {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 35px;
      height: 280px;
      background: linear-gradient(90deg, #1a0f0a 0%, #2d1810 50%, #1a0f0a 100%);
      border-radius: 5px 5px 0 0;
    }

    .current-chord {
      margin-top: 50px;
      padding: 20px 40px;
      background: rgba(139, 90, 43, 0.3);
      border-radius: 15px;
      color: #d4a574;
      font-size: 1.5rem;
      text-align: center;
    }

    .hint {
      margin-top: 20px;
      color: #a67c52;
      font-size: 1rem;
    }

    .cello-scroll {
      position: absolute;
      top: -60px;
      left: 50%;
      transform: translateX(-50%);
      width: 25px;
      height: 70px;
      background: linear-gradient(180deg, #3d2817 0%, #5c3d2e 100%);
      border-radius: 50% 50% 20% 20%;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ» Cello Chord Player</h1>
  <p class="subtitle">Click a string to play a chord!</p>

  <div class="controls">
    <select class="chord-select" id="chordType">
      <option value="major">Major Chord</option>
      <option value="minor">Minor Chord</option>
      <option value="7">7 Chord</option>
      <option value="maj7">Major 7 Chord</option>
      <option value="minor7">Minor 7 Chord</option>
    </select>
  </div>

  <p class="info">Pick a chord type above, then click any string!</p>

  <div class="cello-body">
    <div class="cello-scroll"></div>
    <div class="fingerboard"></div>
    <div class="strings" id="cello">
      <div class="string" data-note="C" data-index="0"><span class="string-label">1</span></div>
      <div class="string" data-note="G" data-index="1"><span class="string-label">2</span></div>
      <div class="string" data-note="D" data-index="2"><span class="string-label">3</span></div>
      <div class="string" data-note="A" data-index="3"><span class="string-label">4</span></div>
    </div>
    <div class="f-holes">
      <div class="f-hole"></div>
      <div class="f-hole"></div>
    </div>
    <div class="bridge"></div>
  </div>

  <div class="current-chord" id="currentChord">
    Click a string to start! ðŸŽµ
  </div>

  <p class="hint">Tip: Try different strings to hear different chords!</p>

  <script>
    const baseNotes = ['C', 'G', 'D', 'A'];
    
    const chordIntervals = {
      major: [0, 4, 7],
      minor: [0, 3, 7],
      '7': [0, 4, 7, 10],
      maj7: [0, 4, 7, 11],
      minor7: [0, 3, 7, 10]
    };

    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    function playCelloNote(frequency, startTime = 0, duration = 1.2) {
      // Main tone
      const osc1 = audioContext.createOscillator();
      const osc2 = audioContext.createOscillator();
      const osc3 = audioContext.createOscillator();
      
      const gain1 = audioContext.createGain();
      const gain2 = audioContext.createGain();
      const gain3 = audioContext.createGain();
      
      // Cello uses sawtooth for richer harmonics
      osc1.type = 'sawtooth';
      osc2.type = 'triangle';
      osc3.type = 'sine';
      
      osc1.frequency.value = frequency;
      osc2.frequency.value = frequency;
      osc3.frequency.value = frequency * 2; // Octave up
      
      // Add vibrato
      const vibrato = audioContext.createOscillator();
      const vibratoGain = audioContext.createGain();
      vibrato.frequency.value = 5; // 5 Hz vibrato
      vibratoGain.gain.value = 3;
      vibrato.connect(vibratoGain);
      vibratoGain.connect(osc1.frequency);
      vibratoGain.connect(osc2.frequency);
      vibrato.start(audioContext.currentTime + startTime);
      vibrato.stop(audioContext.currentTime + startTime + duration);
      
      // Connect oscillators
      osc1.connect(gain1);
      osc2.connect(gain2);
      osc3.connect(gain3);
      
      const masterGain = audioContext.createGain();
      gain1.connect(masterGain);
      gain2.connect(masterGain);
      gain3.connect(masterGain);
      masterGain.connect(audioContext.destination);
      
      // Cello envelope: slow attack, long decay
      const now = audioContext.currentTime + startTime;
      gain1.gain.setValueAtTime(0, now);
      gain1.gain.linearRampToValueAtTime(0.25, now + 0.05);
      gain1.gain.exponentialRampToValueAtTime(0.15, now + 0.3);
      gain1.gain.exponentialRampToValueAtTime(0.01, now + duration);
      
      gain2.gain.setValueAtTime(0, now);
      gain2.gain.linearRampToValueAtTime(0.15, now + 0.05);
      gain2.gain.exponentialRampToValueAtTime(0.08, now + 0.3);
      gain2.gain.exponentialRampToValueAtTime(0.01, now + duration);
      
      gain3.gain.setValueAtTime(0, now);
      gain3.gain.linearRampToValueAtTime(0.08, now + 0.05);
      gain3.gain.exponentialRampToValueAtTime(0.04, now + 0.2);
      gain3.gain.exponentialRampToValueAtTime(0.01, now + duration);
      
      osc1.start(now);
      osc2.start(now);
      osc3.start(now);
      osc1.stop(now + duration);
      osc2.stop(now + duration);
      osc3.stop(now + duration);
    }

    function noteToFrequency(note, octave = 3) {
      const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
      const noteIndex = notes.indexOf(note);
      const a4 = 440;
      const semitones = (octave - 4) * 12 + noteIndex - 9;
      return a4 * Math.pow(2, semitones / 12);
    }

    function getChordNotes(rootNote, chordType) {
      const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
      const rootIndex = notes.indexOf(rootNote);
      const intervals = chordIntervals[chordType];
      
      return intervals.map(interval => {
        const noteIndex = (rootIndex + interval) % 12;
        const octaveOffset = Math.floor((rootIndex + interval) / 12);
        return {
          note: notes[noteIndex],
          octave: 3 + octaveOffset
        };
      });
    }

    const chordTypeSelect = document.getElementById('chordType');
    const currentChordDisplay = document.getElementById('currentChord');

    function playChord(rootNote, chordType) {
      // Resume audio context if needed
      if (audioContext.state === 'suspended') {
        audioContext.resume();
      }

      const chordNotes = getChordNotes(rootNote, chordType);
      
      // Play each note in the chord
      chordNotes.forEach((chordNote, i) => {
        const freq = noteToFrequency(chordNote.note, chordNote.octave);
        playCelloNote(freq, i * 0.1, 1.5);
      });

      // Update display
      const chordName = `${rootNote} ${chordType}`;
      const noteNames = chordNotes.map(n => n.note).join(' - ');
      currentChordDisplay.innerHTML = `ðŸŽµ <strong>${chordName}</strong><br><small>${noteNames}</small>`;

      // Add visual feedback
      const stringEl = document.querySelector(`.string[data-note="${rootNote}"]`);
      if (stringEl) {
        stringEl.classList.add('playing');
        setTimeout(() => stringEl.classList.remove('playing'), 400);
      }
    }

    // Add click handlers
    document.querySelectorAll('.string').forEach(string => {
      string.addEventListener('click', () => {
        const note = string.dataset.note;
        const chordType = chordTypeSelect.value;
        playChord(note, chordType);
      });
    });
  </script>
</body>
</html>
